# 基于 Sui 区块链的去中心化知识加密分享平台

## 一、总体项目描述

本项目旨在构建一个基于 Sui 区块链的去中心化知识加密分享平台。创作者可以在平台上上传各类内容，而用户则通过购买 AccessToken 来解锁和访问这些加密内容。平台的核心理念是结合链上确权与链下加密，并支持多种媒体内容格式。桌面客户端将采用 Go 语言和 Fyne 框架开发。

**核心特性：**
*   **链上确权：** 利用 Sui 区块链实现内容所有权和访问权限的去中心化管理。
*   **链下加密：** 内容本体在链下进行加密存储，确保数据隐私和安全。
*   **多媒体内容支持：** 支持文本、图片、视频、PDF 等多种内容格式。
*   **桌面客户端：** 提供 Go + Fyne 框架开发的桌面应用，支持多平台。

## 二、智能合约 / Move 开发

智能合约将使用 Move 语言在 Sui 区块链上实现，主要管理 Content 对象和 AccessToken 对象，并支持灵活的访问控制和事件通知。

**主要对象与功能：**
*   **Content 对象：**
    *   存储内容的 URI（统一资源标识符）。
    *   存储内容哈希，用于链上验证内容完整性。
    *   定义内容的定价模型。
*   **AccessToken 对象：**
    *   记录 AccessToken 的所有者（owner）。
    *   关联 Content ID，指定其解锁的内容。
    *   包含过期时间，支持时效性访问。
    *   记录撤销状态，实现权限回收。
*   **动态字段：**
    *   实现多等级权限管理（例如：基础版、高级版）。
    *   支持组合通行证，解锁更高级或多样的内容。
*   **事件通知：**
    *   `ContentPublished`：内容发布时触发。
    *   `TokenIssued`：AccessToken 发放时触发。
    *   `TokenRevoked`：AccessToken 撤销时触发。
*   **链上哈希验证：** 通过比对链上存储的哈希值，验证内容的完整性和未被篡改。
*   **合约支持功能：**
    *   **订阅制：** 支持按月续费或自动续费的 AccessToken。
    *   **转售：** 允许用户转售其持有的 AccessToken。
    *   **二级市场：** 为 AccessToken 的转售提供平台，并支持创作者收取版税。

## 三、加密与安全

平台将采用先进的加密技术，确保内容和密钥传输的安全性，并防范常见的网络攻击。

**加密与安全机制：**
*   **内容加密：** 使用 AES-256-GCM 算法对内容文件进行加密，提供认证加密。
*   **密钥加密：** 采用 X25519 / Curve25519 公钥加密解密密钥，实现安全的密钥交换。
*   **随机 Nonce 与用户签名：** 每次解锁内容时生成随机 Nonce，用户通过签名验证身份，防止重放攻击。
*   **零知识登录 (zkLogin)：** 支持匿名访问，增强用户隐私。
*   **临时密钥机制：** 进一步防止重放攻击，提高安全性。

## 四、桌面客户端 (Go + Fyne)

桌面客户端将使用 Go 语言和 Fyne 框架开发，提供跨平台支持，并集成内容浏览、购买、解锁、管理和内容上传等核心功能。

**主要功能模块：**
*   **内容市场浏览：**
    *   展示内容列表。
    *   提供内容详情页，包括价格信息。
    *   集成购买按钮，方便用户购买 AccessToken。
*   **购买 AccessToken：**
    *   调用 Sui JSON-RPC 接口与区块链交互。
    *   集成钱包签名交易功能。
*   **解锁内容：**
    *   向网关服务请求随机数（Nonce）。
    *   用户签名验证身份。
    *   接收网关返回的加密 AES 解密密钥。
    *   本地解密内容并显示。
*   **管理 AccessToken：**
    *   查看用户持有的 AccessToken 列表。
    *   支持 AccessToken 的转让功能。
    *   提供 AccessToken 的撤销功能。
*   **创作者上传内容：**
    *   对内容进行 AES 加密。
    *   将加密内容上传至 Walrus（对象存储服务）。
    *   在 Sui 链上铸造 Content 对象。
*   **异步处理：** 异步处理网络请求和加密操作，避免阻塞 GUI，提升用户体验。
*   **本地缓存：** 缓存已解锁内容，支持大文件流式解密，优化访问速度。

## 五、网关服务

网关服务作为客户端与区块链、内容存储之间的桥梁，负责密钥管理和用户身份验证，但不存储内容本体。

**核心职责：**
*   **验证用户签名随机数 Nonce：** 确保请求的合法性。
*   **检查链上 AccessToken 有效性：** 验证用户是否拥有有效的 AccessToken。
*   **返回加密的 AES 解密密钥：** 将解密密钥加密后发送给客户端。
*   **不存储内容本体：** 网关只管理解密密钥，不触及内容本身，增强安全性。
*   **可扩展性与高可用性：** 设计为支持多用户并发请求，并具备高可用性。

## 六、用户体验增强

平台将致力于提供卓越的用户体验，通过动态权限、多媒体支持和个性化功能提升用户满意度。

**用户体验特性：**
*   **动态权限等级：** 提供基础版、高级版、合集版等不同等级的访问权限。
*   **组合 AccessToken：** 允许用户通过组合不同的 AccessToken 解锁高级内容。
*   **本地多媒体展示：** 客户端支持本地展示文本、图片、视频、PDF 等多种多媒体内容。
*   **访问历史与收藏管理：** 方便用户回顾和管理已访问或感兴趣的内容。
*   **推荐系统：** 基于用户购买行为和偏好，智能推荐相关内容。
*   **多语言支持：** 桌面客户端支持多种语言。
*   **跨平台桌面客户端：** 支持 Windows、macOS、Linux 等主流操作系统。

## 七、商业与增值

平台将构建可持续的商业模式，通过订阅、二级市场和激励机制，促进内容生态的繁荣。

**商业模式与增值服务：**
*   **订阅制 AccessToken：** 提供按月续费或自动续费的订阅模式。
*   **二级市场转售 AccessToken：** 允许用户在二级市场转售 AccessToken，并支持创作者收取版税。
*   **创作者激励和声誉积分：** 激励优质内容创作，并建立创作者声誉体系。
*   **企业/团队版知识库访问权限：** 提供面向企业和团队的定制化知识库访问解决方案。
*   **代币激励机制与社区经济模型：** 探索基于代币的激励机制，构建活跃的社区经济。
## 八、如何开始

### 环境准备

- **Go**: 确保您已安装 Go 1.18 或更高版本。
- **Fyne 依赖**: 遵循 [Fyne 安装指南](https://developer.fyne.io/started/) 为您的操作系统设置必要的图形驱动和工具。
- **Sui Wallet**: 您需要一个 Sui 钱包来与 dApp 交互。

### 1. 克隆仓库

```bash
git clone https://github.com/pwh-pwh/AccessSui
cd AccessSui
```

### 2. 配置您的私钥

您需要一个 Sui 账户来签署交易。

1.  打开 `myconfig.go` 文件。
2.  将占位符 `"your private key"` 替换为您真实的 Sui 账户私钥（经过 base64 编码）。

    ```go
    // myconfig.go
    package main

    const (
    	PriKey = "在这里填入你的SUI私钥" // 例如: "privkey:..."
    )
    ```

    **安全提示**: 请务ah妥善保管您的私钥。对于真实的应用，请使用更安全的方式来管理密钥，例如环境变量或专用的密钥管理服务。

### 3. 运行应用

在您的桌面上运行此应用：

```bash
go run .
```

### 4. 为不同平台构建

您可以使用 `fyne` 命令行工具为不同平台打包您的应用。

- **桌面端**:
  ```bash
  fyne package
  ```
- **Web 端 (WebAssembly)**:
  ```bash
  fyne package -os wasm
  ```
- **移动端 (Android)**:
  ```bash
  fyne package -os android
  ```